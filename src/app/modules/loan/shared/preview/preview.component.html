<div style="max-width: 500px;" *ngFor="let category of loanApplication">
    <div class="preview-container" *ngFor="let item of category | keyvalue">
        <h3 class="preview-title">{{item.key|splitCamelCase}}</h3>
    <!-- <p>{{loanApplication[convertToString(category.key)]}}</p> -->
    <div class="preview-items">
        
        <ng-container *ngIf="isArray(item.value)">
            
            <div class="preview-item" *ngFor="let itm of convertFromUnknown(item.value)"> 
                <ng-container *ngIf="isString(itm)">
                    <div ><p>{{itm|splitCamelCase}}</p></div>
                </ng-container>
                <ng-container *ngIf="!isString(itm)">
                    
                    <div *ngFor="let it of itm | keyvalue">
                        <p><span><b>{{it.key|splitCamelCase}}</b></span>:<span>{{it.value}}</span></p>
                    </div>
                </ng-container>
            </div>
        </ng-container>
        
    </div>
</div>
</div>
<div>

    <app-form [form]="form" (onSubmit)="submitApplication($event)" >
        <app-button [form]="form" [loading$]="loading$" fieldClass="theme_col-3 no-margin--top">Submit Application</app-button>
        </app-form>
</div>



<app-modal *ngIf="(show$|async)==true && !isLoggedIn" (onChange)="close()">
    <app-modal-header slot="header"><h1 id="req-icon"><span class="material-icons">
        info
        </span>
        </h1><h3>Sign In Required</h3></app-modal-header>
    <app-modal-body slot="body">
        <p>Don't worry, your application would be submitted automatically once you've signed in.</p>
        <div style=" display: flex; width:100%; align-items: center; justify-content: center;">
        <p><b>Go to login</b></p> <button class="widget_button widget_button--small" style="margin-left: 10px;" (click)="onNavigate('auth/login')">Login</button>
    </div>
    </app-modal-body>
</app-modal>
<!-- <ng-template [ngForIn]="loanApplication | keyvalue"></ng-template> -->

<app-modal  *ngIf="(show2$|async)==true" (onChange)="close2()">
    <app-modal-header slot="header">
        <div class="icon theme_flex theme_flex--middle" style="max-width: 150px; margin: auto; margin-top:-5%;">
            <app-lottie  assetPath="vanir-capital-badge" ></app-lottie>
            
        </div>
    </app-modal-header>
    <app-modal-body slot="body">
            
               <div class="modal_content" style="text-align: center;">
                        <h1>All Done</h1>
                    <div class="form_group">
                        <p class="theme_text--heading theme_text--heading3">You have successfully applied for a loan.</p>
                        <p>Request ID: {{apiSuccess$|async}}</p>
                    </div>
                    <div class="form_group">
                        <p class="theme_color--grey">Thank you for filling out the application and choosing Vanir Capital. You would be notified as your request is processed. </p>
                        <button class="widget_button" id="submit" type="submit" style="margin: 5px auto;" tabindex="0" data-next="modal_ratings"><div>Done</div></button>
                        <p class="theme_color--grey">Are you looking to invest? <span class="theme_color--yellow"><a href="/investment" target="_blank" ><u>Go to investments</u></a></span></p>
        
                    </div>
                   
               </div>
          
        
    </app-modal-body>
</app-modal>



<app-modal  *ngIf="(show3$|async)==true" (onChange)="close3()">
    <app-modal-header slot="header">
        <div class="icon theme_flex theme_flex--middle" style="max-width: 150px; margin: auto; margin-top:-5%;">
            <app-lottie assetPath="vanir-capital-error" ></app-lottie>
            
        </div>
    </app-modal-header>
    <app-modal-body slot="body">
            
               <div class="modal_content" style="text-align: center;">
                   
                        <h1>Oops</h1>
                    <div class="form_group">
                        <p class="theme_text--heading theme_text--heading3">There seems to be a problem with your request</p>
                    </div>
                    <div class="form_group">
                        <p class="theme_color--grey">{{apiError$|async}} </p>
                        <app-button (onClick)="close2()"><ng-container slot="button" >Close</ng-container ></app-button>
                       
                    </div>
               </div>
          
        
    </app-modal-body>
</app-modal>
